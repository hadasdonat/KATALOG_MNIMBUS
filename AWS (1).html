<!DOCTYPE html>
<html dir="rtl" lang="he">
  <head>
    <meta charset="UTF-8" />
    <title>תוצאות מוצרי AWS</title>
    <link rel="stylesheet" href="GCP.css" />
  </head>
  <body>
    <header class="header">
      <div class="header-container">
        <div>
          <a href="/">
            <img
              class="header-logo"
              src="https://c.animaapp.com/17bVmHgi/img/-----------1@2x.png"
              alt="Logo"
            />
          </a>
          <button class="home-button" onclick="window.location.href='/'">לדף הבית</button>
        </div>
        <form class="search-form" onsubmit="handleHeaderSearch(event)">
          <input type="text" id="header-search" placeholder="חיפוש" />
          <button type="submit" class="search-button-icon">
            <svg
              xmlns="http://www.w3.org/2000/svg"
              width="20"
              height="20"
              viewBox="0 0 24 24"
              fill="none"
              stroke="currentColor"
              stroke-width="2"
            >
              <path d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z" />
            </svg>
          </button>
        </form>
      </div>
    </header>

    <div class="container">
      <button class="home-button" onclick="window.location.href='/'">
        חזרה לבית
      </button>
      <h1 class="page-title">תוצאות מוצרי AWS</h1>

      <div class="filter-section">
        <div class="filter-header">
          <span style="color: #a72223; font-weight: 500">*</span>
          <span style="color: #0c3058; font-weight: 500">סינון תוצאות</span>
        </div>

        <div class="filter-options">
          <label class="checkbox-item">
            <span>בארץ</span>
            <input type="checkbox" class="checkbox-input location-group" id="israel" />
            <div class="checkbox-custom"></div>
          </label>
          <label class="checkbox-item">
            <span>חו"ל</span>
            <input type="checkbox" class="checkbox-input location-group" id="abroad" />
            <div class="checkbox-custom"></div>
          </label>
          <label class="checkbox-item">
            <span>No-SaaS</span>
            <input type="checkbox" class="checkbox-input type-group" id="nonSaas" />
            <div class="checkbox-custom"></div>
          </label>
          <label class="checkbox-item">
            <span>SaaS</span>
            <input type="checkbox" class="checkbox-input type-group" id="saas" />
            <div class="checkbox-custom"></div>
          </label>a
          <label class="checkbox-item">
            <span>רובד 1</span>
            <input type="checkbox" class="checkbox-input" id="layer1" />
            <div class="checkbox-custom"></div>
          </label>
          <label class="checkbox-item">
            <span>רובד 5</span>
            <input type="checkbox" class="checkbox-input" id="layer5" />
            <div class="checkbox-custom"></div>
          </label>
        </div>
      </div>

      <div class="search-container">
        <input
          type="text"
          class="search-input"
          id="mainSearch"
          placeholder="חיפוש"
        />
        <select class="search-input" id="categorySearch">
          <option value="">כל הקטגוריות</option>
          <option value="internet-of-things">Internet of Things</option>
          <option value="database">Database</option>
          <option value="networking">Networking & Content Delivery</option>
          <option value="business-applications">Business Applications</option>
          <option value="frontend">Front-End Web & Mobile</option>
          <option value="integration">Application Integration</option>
          <option value="end-user-computing">End User Computing</option>
          <option value="analytics">Analytics</option>
          <option value="machine-learning">Machine Learning</option>
          <option value="databases">Databases</option>
          <option value="migration">Migration</option>
          <option value="serverless">Serverless</option>
          <option value="financial">Cloud Financial Management</option>
          <option value="satellite">Satellite</option>
          <option value="robotics">Robotics</option>
          <option value="architecture">Architecture Strategy</option>
          <option value="marketplace">Marketplace</option>
          <option value="cloud-erp">Cloud ERP</option>
        </select>
      </div>

      <button class="clear-filter-btn" onclick="clearFilters()">
        נקה סינון
      </button>

      <div id="results-container" class="results-container">
        <!-- Results will be dynamically inserted here -->
      </div>
    </div>

    <script>
      document.addEventListener("DOMContentLoaded", function () {
        // Load GCP data from GCP_5.json
        fetch("FIVE.json")
          .then((response) => response.json())
          .then((data) => {
            // Filter only Google/GCP products
            const AWS5Data =  data["שירותים מאושרים - AWS"]
              .filter((item) => item !== null) // Remove null entries
              .filter((item) => {
                if (!item) return false;
                const manufacturer = item.Column6?.toLowerCase() || "";
                const serviceId = item.Column2?.toLowerCase() || "";
              
              });
              renderCards(AWS5Data);
            })
//     document.addEventListener("DOMContentLoaded", function () {
//       Promise.all([
//     fetch("FIVE.json").then((response) =>response.json())
//     .then((data) => { 
//         if (!response.ok) {
//             throw new Error(`Failed to load FIVE.json: ${response.statusText}`);
//         }
//         return response.json();
//     }),
//     fetch("mergeAWS.json").then((response) => {
//         if (!response.ok) {
//             throw new Error(`Failed to load mergeAWS.json: ${response.statusText}`);
//         }
//         return response.json();
//     })
// ])
//     .then(([data1, data2]) => {
//         console.log("FIVE.json Data:", data1); // בדיקה של קובץ ראשון
//         console.log("mergeAWS.json Data:", data2); // בדיקה של קובץ שני
//         const awsData1 = data1["שירותים מאושרים - AWS"]; // נתונים מקובץ ראשון
//         const awsData2 = data2 || []; // נתונים מקובץ שני
//         console.log("Parsed awsData1:", awsData1);
//         console.log("Parsed awsData2:", awsData2);

//         // איחוד נתונים
//         const combinedData = [
//             ...awsData1.map(item => ({ ...item, source: "FIVE" })), 
//             ...awsData2.map(item => ({ ...item, source: "NEW_FILE" }))
//         ];
//         console.log("Combined Data:", combinedData);

//         // שלח את המידע לפונקציית renderCards
//         renderCards(combinedData);
//     })
//     .catch((error) => console.error("Error loading data:", error));

// });

        // Initialize filters
        const filters = {
          israel: false,
          abroad: false,
          saas: false,
          nonSaas: false,
          searchText: "",
          categorySearch: "",
        };

        // Setup event listeners
document.getElementById("israel").addEventListener("change", (e) => {
  if (e.target.checked) {
    document.getElementById("abroad").checked = false; // בטל את הצ'קבוקס השני
    filters.abroad = false;
  }
  filters.israel = e.target.checked;
  filterResults();
});

document.getElementById("abroad").addEventListener("change", (e) => {
  if (e.target.checked) {
    document.getElementById("israel").checked = false; // בטל את הצ'קבוקס השני
    filters.israel = false;
  }
  filters.abroad = e.target.checked;
  filterResults();
});

document.getElementById("saas").addEventListener("change", (e) => {
  if (e.target.checked) {
    document.getElementById("nonSaas").checked = false; // בטל את הצ'קבוקס השני
    filters.nonSaas = false;
  }
  filters.saas = e.target.checked;
  filterResults();
});

document.getElementById("nonSaas").addEventListener("change", (e) => {
  if (e.target.checked) {
    document.getElementById("saas").checked = false; // בטל את הצ'קבוקס השני
    filters.saas = false;
  }
  filters.nonSaas = e.target.checked;
  filterResults();
});
document.getElementById("layer1").addEventListener("change", (e) => {
          filters.layer1 = e.target.checked;
          filterResults();
        });

        document.getElementById("layer5").addEventListener("change", (e) => {
          filters.layer5 = e.target.checked;
          filterResults();
        });

        function renderCards(data) {
          const container = document.getElementById("results-container");
          if (!data || data.length === 0) {
            container.innerHTML =
              '<div class="no-results">לא נמצאו תוצאות</div>';
            return;
          }

          container.innerHTML = data
            .map(
              (item) => `
                    <div class="result-card" 
                         data-service-type="${item.Column7}"
                         data-company="${item.Column3}"
                         data-manufacturer="${item.Column4}">
                        <h3>${item.Column5 || "ללא שם"}</h3>
                        <p class="description">${
                          item.Column6 || "ללא תיאור"
                        }</p>
                        <div class="details">
                            <p><strong>חברה:</strong> ${item.Column3 || ""}</p>
                            <p><strong>יצרן:</strong> ${item.Column4 || ""}</p>
                            <p><strong>סוג שירות:</strong> ${
                              item.Column7 || ""
                            }</p>
                            <p><strong>איש קשר:</strong> ${
                              item.Column10 || ""
                            }</p>
                            <p><strong>מועד אישור:</strong> ${
                              item.Column11 || ""
                            }</p>
                            ${
                              item.Column12
                                ? `<p class="notes"><strong>הערות:</strong> ${item.Column12}</p>`
                                : ""
                            }
                            ${
                              item.Column9
                                ? `<p><a href="${item.Column9}" target="_blank">קישור למחירון</a></p>`
                                : ""
                            }
                        </div>
                    </div>
                `
            )
            .join("");
        }   
//   function renderCards(awsData) {
//   const container = document.getElementById("results-container");

//   // בדיקה אם awsData ריק או לא מוגדר
//   if (!awsData || awsData.length === 0) {
//     container.innerHTML = '<div class="no-results">לא נמצאו תוצאות</div>';
//     return;
//   }

//   // יצירת כרטיסיות
//   const awsCards = awsData.map((item) => {
//     // בדיקה אם item תקין
//     if (!item || !item.source) {
//       return ''; // דלג על פריטים לא תקינים
//     }

//     // עיבוד פריטים מ-FIVE.json
//     if (item.source === "FIVE") {
//       return `
//         <div class="result-card aws-native">
//           <h3>${item["Column5"] || "שם מוצר לא זמין"}</h3>
//           <p class="description">${item["Column6"] || "תיאור לא זמין"}</p>
//           <div class="details">
//             <p><strong>איש קשר:</strong> ${item["Column10"] || "איש קשר לא זמין"}</p>
//             <a href="${item["Column9"] || "#"}" target="_blank" class="more-info">למידע נוסף</a>
//             <a href="${item["Column9"] || "#"}" target="_blank" class="pricing-info">קישור למחירון</a>
//           </div>
//         </div>
//       `;
//     }

//     // עיבוד פריטים מ-NEW_FILE.json
//     if (item.source === "NEW_FILE") {
//       const productName = item.additionalFields?.productName || item.name || "לא זמין";
//       const productSummary = item.additionalFields?.productSummary || "תיאור לא זמין";
//       const productCategory = item.additionalFields?.productCategory || "קטגוריה לא זמינה";
//       const productUrl = item.additionalFields?.productUrl || "#";
//       const regions = item.regions?.map((r) => r["aws:region"]).join(", ") || "לא זמין";

//       return `
//         <div class="result-card aws-native" 
//              data-category="${productCategory}">
//           <div class="service-type">AWS Service</div>
//           <h3>${productName}</h3>
//           <p class="description">${productSummary}</p>
//           <div class="details">
//             <p><strong>קטגוריה:</strong> ${productCategory}</p>
//             <p><strong>אזורים:</strong> ${regions}</p>
//             <a href="${productUrl}" target="_blank" class="more-info">למידע נוסף</a>
//           </div>
//         </div>
//       `;
//     }

//     // אם לא נמצא source מתאים
//     return '';
//   });

//   // עדכון תצוגת הקונטיינר
//   container.innerHTML = awsCards.join("") || '<div class="no-results">לא נמצאו תוצאות</div>';
// }



        function clearFilters() {
          filters.israel = false;
          filters.abroad = false;
          filters.saas = false;
          filters.nonSaas = false;
          filters.searchText = "";
          filters.categorySearch = "";

          document.getElementById("israel").checked = false;
          document.getElementById("abroad").checked = false;
          document.getElementById("saas").checked = false;
          document.getElementById("nonSaas").checked = false;
          document.getElementById("mainSearch").value = "";
          document.getElementById("categorySearch").value = "";

          filterResults();
        }

        function filterResults() {
          const cards = document.querySelectorAll(".result-card");
          cards.forEach((card) => {
            const regions = JSON.parse(card.dataset.regions || "[]");
            const category = card.dataset.category;
            const text = card.textContent.toLowerCase();
            const serviceType = card.dataset.serviceType?.toLowerCase();

            const locationMatch =
              (!filters.israel && !filters.abroad) ||
              (filters.israel && regions.includes("il-central-1")) ||
              (filters.abroad && regions.some((r) => r !== "il-central-1"));

            const serviceTypeMatch =
              (!filters.saas && !filters.nonSaas) ||
              (filters.saas && serviceType === "saas") ||
              (filters.nonSaas && serviceType === "non-saas");

            const searchMatch =
              !filters.searchText ||
              text.includes(filters.searchText.toLowerCase());

            const categoryMatch =
              !filters.categorySearch ||
              category
                .toLowerCase()
                .includes(filters.categorySearch.toLowerCase());

            card.style.display =
              locationMatch && serviceTypeMatch && searchMatch && categoryMatch
                ? "block"
                : "none";
          });
        }
    </script>
  </body>
</html>
